<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fswatch: fswatch</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">fswatch<span id="projectnumber">&#160;1.17.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">fswatch </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="introduction"></a>
Introduction</h1>
<p ><code>fswatch</code> is a cross-platform file change monitor currently supporting the following backends:</p>
<ul>
<li>A monitor based on the <em>FSEvents</em> API of Apple macOS.</li>
<li>A monitor based on <em>kqueue</em>, an event notification interface introduced in FreeBSD 4.1 and supported on most *BSD systems (including macOS).</li>
<li>A monitor based on <em>File Events Notification</em>, an event notification API of the Solaris/Illumos kernel.</li>
<li>A monitor based on <em>inotify</em>, a Linux kernel subsystem that reports file system changes to applications.</li>
<li>A monitor based on the Microsoft Windows' <code>ReadDirectoryChangesW</code> function and reads change events asynchronously.</li>
<li>A monitor which periodically stats the file system, saves file modification times in memory and manually calculates file system changes, which can work on any operating system where stat can be used.</li>
</ul>
<p >Instead of using different APIs, a programmer can use just one: the API of <code>libfswatch</code>. The advantages of using <code>libfswatch</code> are many:</p>
<ul>
<li><em>Portability</em>: <code>libfswatch</code> supports many backends, effectively giving support to a great number of operating systems, including Solaris, *BSD Unix and Linux.</li>
<li>Ease of use: using <code>libfswatch</code> should be easier than using any of the APIs it supports.</li>
</ul>
<h1><a class="anchor" id="changelog"></a>
Changelog</h1>
<p >See the <a class="el" href="history.html">History</a> page.</p>
<h1><a class="anchor" id="bindings"></a>
Available Bindings</h1>
<p ><code>libfswatch</code> is a C++ library with C bindings which makes it available to a wide range of programming languages. If a programming language has C bindings, then <code>libfswatch</code> can be used from it. The C binding provides all the functionality provided by the C++ implementation and it can be used as a fallback solution when the C++ API cannot be used.</p>
<h1><a class="anchor" id="libtools-versioning"></a>
libtool's versioning scheme</h1>
<p ><code>libtool</code>'s versioning scheme is described by three integers: <code>current:revision:age</code> where:</p>
<ul>
<li><code>current</code> is the most recent interface number implemented by the library.</li>
<li><code>revision</code> is the implementation number of the current interface.</li>
<li><code>age</code> is the difference between the newest and the oldest interface that the library implements.</li>
</ul>
<h1><a class="anchor" id="c-cpp-api"></a>
The C and the C++ API</h1>
<p >The C API is built on top of the C++ API but the two are very different, to reflect the fundamental differences between the two languages.</p>
<p >The <a class="el" href="cpp-api.html">C++ API</a> centres on the concept of <em>monitor</em>, a class of objects modelling the functionality of the file monitoring API. Different monitor types are modelled as different classes inheriting from the <code><a class="el" href="classfsw_1_1monitor.html" title="Base class of all monitors.">fsw::monitor</a></code> abstract class, that is the type that defines the core monitoring API. API clients can pick the current platform's default monitor, or choose a specific implementation amongst the available ones, configure it and <em>run</em> it. When running, a monitor gathers file system change events and communicates them back to the caller using a <em>callback</em>.</p>
<p >The <a class="el" href="c-api.html">C API</a>, on the other hand, centres on the concept of <em>monitoring session</em>. A session internally wraps a monitor instance and represents an opaque C bridge to the C++ monitor <em>API</em>. Sessions are identified by a <em>session handle</em> and they can be thought as a sort of C facade of the C++ monitor class. In fact there is an evident similarity between the C library functions operating on a monitoring session and the methods of the <code>monitor</code> class.</p>
<h1><a class="anchor" id="thread-safety"></a>
Thread Safety</h1>
<p >The C++ API does not deal with thread safety explicitly. Rather, it leaves the responsibility of implementing a thread-safe use of the library to the callers. The C++ implementation has been designed in order to:</p>
<ul>
<li>Encapsulate all the state of a monitor into its class fields.</li>
<li>Perform no concurrent access control in methods or class fields.</li>
<li>Guarantee that functions and <em>static</em> methods are thread safe.</li>
</ul>
<p >As a consequence, it is <em>not</em> thread-safe to access a monitor's member, be it a method or a field, from different threads concurrently. The easiest way to implement thread-safety when using <code>libfswatch</code>, therefore, is segregating access to each monitor instance from a different thread.</p>
<p >Similarly, the C API has been designed in order to provide the same guarantees offered by the C++ API:</p>
<ul>
<li>Concurrently manipulating different monitoring sessions is thread safe.</li>
<li>Concurrently manipulating the same monitoring session is <em>not</em> thread safe.</li>
</ul>
<h1><a class="anchor" id="cpp11"></a>
C++11</h1>
<p >There is an additional limitation which affects the C library only: the C binding implementation internally uses C++11 classes and keywords to provide the aforementioned guarantees. If compiler or library support is not found when building <code>libfswatch</code> the library will still build, but those guarantees will <em>not</em> be honoured. A warning such as the following will appear in the output of <code>configure</code> to inform the user: </p><pre class="fragment">configure: WARNING: libfswatch is not thread-safe because the current
combination of compiler and libraries do not support the thread_local
storage specifier.
</pre> <h1><a class="anchor" id="bug-reports"></a>
Reporting Bugs and Suggestions</h1>
<p >If you find problems or have suggestions about this program or this manual, please report them as new issues in the official GitHub repository of <code>fswatch</code> at <a href="https://github.com/emcrisostomo/fswatch">https://github.com/emcrisostomo/fswatch</a>. Please, read the <code>CONTRIBUTING.md</code> file for detailed instructions on how to contribute to <code>fswatch</code>. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
